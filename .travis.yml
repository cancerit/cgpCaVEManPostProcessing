notifications:
  slack: wtsi-cgpit:ptUMR1tkNyZJYd9TpGoss8WR
  email: false

sudo: false

language: ruby

services:
  - docker

script:
  - set -e
  - echo 'Build and check docker image'
  - docker build -t cavemanpp .
  - docker images | grep -c cavemanpp
  - echo 'Verify program(s) from each inherited base image - dockstore-cgpbigwig'
  - docker run -t --rm cavemanpp bwjoin --version
  - echo 'Verify program(s) from each inherited base image - dockstore-cgpmap'
  - docker run -t --rm cavemanpp bwa_mem.pl -version
  - docker run -t --rm cavemanpp bammarkduplicates2 --version
  - docker run -t --rm cavemanpp samtools --version
  - docker run -t --rm cavemanpp bash -c 'bwa 2>&1 | grep Version'
  - echo 'Verify program(s) from this repo'
  - docker run -t --rm cavemanwrap cgpFlagCaVEMan.pl --version

# matrix:
#   include:
#     # works on Precise and Trusty
#     - os: linux
#       addons:
#         apt:
#           sources:
#             - ubuntu-toolchain-r-test
#           packages:
#             - g++-4.9
#       env:
#          - MATRIX_EVAL="CC=gcc-4.9 && CXX=g++-4.9"

# before_install:
#   - eval "${MATRIX_EVAL}"

# env:
#   - CC=gcc

# notifications:
#   slack: wtsi-cgpit:ptUMR1tkNyZJYd9TpGoss8WR
#   email: false

# addons:
#   apt:
#     packages:
#       - build-essential # everything
#       - autoconf # biobambam
#       - libtool # biobambam
#       - zlib1g-dev # many
#       - nettle-dev # cgpBigWig
#       - libncurses5-dev # samtools
#       - unzip # kentools/pcap
#       - libcurl4-openssl-dev # many
#       - libgd-dev
#       - libdb-dev

# install: true

# language: perl

# perl:
#   - "5.22"

# script:
#   - export PATH=$HOME/install/bin:$HOME/install/biobambam2/bin:$PATH
#   - git clone --depth 1 --single-branch --branch develop https://github.com/cancerit/cgpBigWig.git
#   - cd cgpBigWig
#   - ./setup.sh $HOME/install
#   - cd ../
#   - git clone --depth 1 --single-branch --branch develop https://github.com/cancerit/PCAP-core.git
#   - cd PCAP-core
#   - ./setup.sh $HOME/install
#   - cd ../
#   - git clone --depth 1 --single-branch --branch dev https://github.com/cancerit/cgpVcf.git
#   - cd cgpVcf
#   - ./setup.sh $HOME/install
#   - cd ../
#   - ./setup.sh $HOME/install

# dist: trusty
# sudo: false
